#:kivy 1.0
#:import join os.path.join
<Node>:
    #nodetextlabel:nodetextlabel
    size_hint:None,None
    canvas.before:
        Color:
            rgb: root.bgcolor
        Rectangle:
            pos: self.pos
            size: self.size
        Line:
            rectangle:self.pos+[self.width +2, self.height +2]#(100,100,30,10)
            #points: ()
            #points: zip(self.data.x, self.data.y)
        #Line:
           # points: self.fathers_end_pos+ [self.x,self.y]
        Line:
            bezier:[self.fathers_end_pos[0]+self.fathers_width, self.fathers_end_pos[1]] + [self.fathers_end_pos[0] +self.fathers_width + 30, self.fathers_end_pos[1]] + [self.x-30,self.y] + self.pos
    Button:
        pos:root.right,root.y
        size:root.height,root.height
        on_press:root.fold_unfold()
    Button:
        pos:root.right+root.height+1,root.y
        size:15,root.height
        on_press:root.edit()
    Button:
        pos:root.right+2*(root.height+1),root.y
        size:root.height,root.height
        on_press:root.add_child()
<MapView>:

<LoadDialog>:
    #size_hint_y:0.5
    BoxLayout:
        size: root.size
        pos: root.pos
        orientation: "vertical"
        FileChooserListView:
            id: filechooser
        BoxLayout:
            size_hint_y: None
            height: 30
            Button:
                text: "Cancel"
                on_release: root.cancel()
                #on_press:root.dismiss(force=True)
            Button:
                text: "Load"
                on_release: root.load(join(filechooser.path, filechooser.selection[0]))
                #on_release: root.dismiss(force=True)


<MindmapApp>:
    mv:mv
    BoxLayout:
        orientation:'vertical'
        ScrollView:
            MapView:
                size_hint_y:None
                size_hint_x:None
                id:mv
        Button:
            text:"test"
            size_hint_y:0.1
            on_press:root.show_load()
